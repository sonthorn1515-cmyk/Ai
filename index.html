<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VIXEL â€” AI Video Generator</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #090212; --s1: #120524; --s2: #1a0833;
  --a1: #00e5ff; --a2: #d900ff; --text: #e0fbfc; --muted: #6b6b8a;
}
*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
body { background: var(--bg); color: var(--text); font-family: 'Syne', sans-serif; min-height: 100vh; overflow-x: hidden; }
nav { display: flex; align-items: center; justify-content: center; height: 60px; background: rgba(9,2,18,0.9); border-bottom: 1px solid rgba(0,229,255,0.2); position: sticky; top:0; z-index: 100; }
.logo { font-family: 'Bebas Neue', sans-serif; font-size: 24px; letter-spacing: 4px; color: white; text-decoration: none; }
.logo span { color: var(--a1); }
.wrapper { max-width: 800px; margin: 0 auto; padding: 20px; }
.panel-card { background: var(--s1); border: 1px solid rgba(0,229,255,0.15); border-radius: 12px; padding: 16px; margin-bottom: 16px; }
.panel-title { font-family: 'Space Mono', monospace; font-size: 11px; font-weight: 700; color: var(--a1); text-transform: uppercase; margin-bottom: 12px; display: block; }
.field-label { font-size: 10px; color: var(--muted); margin-bottom: 6px; display: block; }
.input-field { width: 100%; background: var(--s2); border: 1px solid rgba(217,0,255,0.2); border-radius: 8px; padding: 12px; color: #fff; font-family: 'Space Mono', monospace; font-size: 13px; outline: none; }
.prompt-ta { min-height: 100px; resize: vertical; }
.gen-btn { width: 100%; padding: 16px; background: linear-gradient(135deg, var(--a1), var(--a2)); color: #000; border: none; border-radius: 12px; font-family: 'Bebas Neue', sans-serif; font-size: 20px; letter-spacing: 2px; cursor: pointer; transition: 0.3s; }
.gen-btn:disabled { opacity: 0.4; cursor: not-allowed; }
.preview-box { width: 100%; aspect-ratio: 16/9; background: #000; border: 1px dashed var(--muted); border-radius: 12px; margin-top: 20px; display: flex; align-items: center; justify-content: center; text-align: center; overflow: hidden; font-size: 12px; color: var(--muted); padding: 15px; }
video { width: 100%; height: 100%; border-radius: 8px; }
</style>
</head>
<body>

<nav><a href="#" class="logo">VI<span>XEL</span> AI</a></nav>

<div class="wrapper">
  <div class="panel-card" style="border-color: var(--a2);">
    <span class="panel-title">ğŸ”‘ API CONFIGURATION</span>
    <span class="field-label">Replicate API Token (r8_...)</span>
    <input type="password" id="apiKey" class="input-field" placeholder="Paste your secret token here">
  </div>

  <div class="panel-card">
    <span class="panel-title">ğŸ¬ GENERATION PANEL</span>
    <span class="field-label">Video Prompt (English Only)</span>
    <textarea id="prompt" class="input-field prompt-ta" placeholder="e.g. A futuristic robot walking in a forest, 4k, cinematic..."></textarea>
  </div>

  <button id="genBtn" class="gen-btn" onclick="runAI()">START GENERATION</button>

  <div id="statusBox" class="preview-box">ášá„áŸ‹á…á¶áŸ†á€á¶ášá”á‰áŸ’á‡á¶...</div>
</div>

<script>
async function runAI() {
  const token = document.getElementById('apiKey').value.trim();
  const prompt = document.getElementById('prompt').value.trim();
  const status = document.getElementById('statusBox');
  const btn = document.getElementById('genBtn');

  if (!token || !prompt) return alert("áŸá¼á˜á”áŸ†á–áŸá‰ API Key á“á·á„ Prompt á±áŸ’á™á‚áŸ’ášá”áŸ‹á‚áŸ’ášá¶á“áŸ‹!");

  btn.disabled = true;
  status.innerHTML = "â³ á€áŸ†á–á»á„á‘á¶á€áŸ‹á‘á„á‘áŸ… AI... áŸá¼á˜ášá„áŸ‹á…á¶áŸ† (áŸ¡-áŸ£ á“á¶á‘á¸)";

  try {
    // á‡áŸ†á á¶á“á‘á¸ áŸ¡: á”á„áŸ’á€á¾á Prediction
    const resp = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent("https://api.replicate.com/v1/predictions"), {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        method: "POST",
        headers: { "Authorization": `Token ${token}`, "Content-Type": "application/json" },
        body: JSON.stringify({
          version: "924747018af562286fb71b28c523e3dda66a22c9fc3ead6f3ba15430ab882623",
          input: { prompt: prompt }
        })
      })
    });

    const dataRaw = await resp.json();
    let prediction = JSON.parse(dataRaw.contents);

    if (prediction.error) throw new Error(prediction.error);

    // á‡áŸ†á á¶á“á‘á¸ áŸ¢: áá¶á˜áŠá¶á“áŸáŸ’áá¶á“á—á¶á– (Polling)
    const checkUrl = prediction.urls.get;
    
    while (prediction.status !== "succeeded" && prediction.status !== "failed") {
      await new Promise(r => setTimeout(r, 4000));
      const pollResp = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(checkUrl), {
        headers: { "Authorization": `Token ${token}` }
      });
      const pollDataRaw = await pollResp.json();
      prediction = JSON.parse(pollDataRaw.contents);
      status.innerHTML = `ğŸ¬ á€áŸ†á–á»á„á•á›á·ááœá¸áŠáŸá¢á¼... (áŸáŸ’áá¶á“á—á¶á–: ${prediction.status})`;
    }

    if (prediction.status === "succeeded") {
      const videoUrl = Array.isArray(prediction.output) ? prediction.output[0] : prediction.output;
      status.innerHTML = `<video src="${videoUrl}" controls autoplay loop></video>`;
    } else {
      status.innerHTML = "âŒ á€á¶ášá”á„áŸ’á€á¾áá”ášá¶á‡áŸá™!";
    }

  } catch (err) {
    status.innerHTML = "âŒ á˜á¶á“á”á‰áŸ’á á¶: " + err.message;
  } finally {
    btn.disabled = false;
  }
}
</script>
</body>
</html>
